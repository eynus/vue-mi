(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-780a5c3a"],{"0a49":function(s,t,e){var a=e("9b43"),i=e("626a"),r=e("4bf8"),n=e("9def"),d=e("cd1c");s.exports=function(s,t){var e=1==s,c=2==s,o=3==s,l=4==s,u=6==s,v=5==s||u,p=t||d;return function(t,d,f){for(var _,h,m=r(t),C=i(m),A=a(d,f,3),b=n(C.length),g=0,w=e?p(t,b):c?p(t,0):void 0;b>g;g++)if((v||g in C)&&(_=C[g],h=A(_,g,m),s))if(e)w[g]=h;else if(h)switch(s){case 3:return!0;case 5:return _;case 6:return g;case 2:w.push(_)}else if(l)return!1;return u?-1:o||l?l:w}}},"114b":function(s,t,e){},1169:function(s,t,e){var a=e("2d95");s.exports=Array.isArray||function(s){return"Array"==a(s)}},"20d6":function(s,t,e){"use strict";var a=e("5ca1"),i=e("0a49")(6),r="findIndex",n=!0;r in[]&&Array(1)[r](function(){n=!1}),a(a.P+a.F*n,"Array",{findIndex:function(s){return i(this,s,arguments.length>1?arguments[1]:void 0)}}),e("9c6c")(r)},"7cb4":function(s,t,e){"use strict";e.r(t);var a=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",[e("div",{staticClass:"miniheader"},[e("div",{staticClass:"container"},[e("div",{staticClass:"miniheader-logo"},[e("router-link",{attrs:{to:"/"}},[s._v("小米官网")])],1),s._m(0),e("div",{staticClass:"miniheader-info"},[e("a",{staticClass:"user-name",attrs:{href:"#"}},[e("span",[s._v(s._s(s.user.name))])]),e("span",{staticClass:"sep"},[s._v("|")]),e("a",{staticClass:"user-name",attrs:{href:"javascript:;"},on:{click:s.confirmQuit}},[e("span",[s._v("注销")])])])])]),e("div",{staticClass:"checkout"},[e("div",{staticClass:"container"},[e("div",{staticClass:"checkout-box"},[e("div",{staticClass:"checkout-address clearfix"},[e("p",{staticClass:"address-header"},[s._v("收货地址")]),e("div",{staticClass:"address-body"},[s._l(s.addressList,function(t,a){return e("div",{key:a,staticClass:"address-item",class:{select:t.address_id==s.selectAddress},on:{click:function(e){s.selectAddress=t.address_id}}},[e("dl",[e("dt",{staticClass:"recipient"},[s._v(s._s(t.recipient))]),e("dd",{staticClass:"phone"},[s._v(s._s(t.phone))]),e("dd",{staticClass:"area"},[s._v(s._s(t.area))]),e("dd",{staticClass:"address"},[s._v(s._s(t.address))])]),e("div",{staticClass:"actions",on:{click:function(e){return s.updateAddress(t)}}},[e("a",{attrs:{href:"javascript:;"}},[s._v("修改")])])])}),e("div",{staticClass:"address-item address-new",on:{click:function(t){s.newAddressVisible=!0}}},[e("i",{staticClass:"iconfont"},[s._v("")]),s._v("\n              添加新地址\n            ")])],2)]),e("div",{staticClass:"checkout-goods"},[e("p",{staticClass:"goods-header"},[s._v("商品")]),e("div",{staticClass:"goods-body"},[e("ul",{staticClass:"goods-list clearfix"},[s._m(1),s._l(s.proArr,function(t,a){return e("li",{key:a,staticClass:"clearfix"},[e("div",{staticClass:"goods-img"},[e("img",{attrs:{src:t.imgs[0],alt:""}})]),e("div",{staticClass:"goods-name"},[e("router-link",{attrs:{to:"/product/"+t.pid}},[s._v(s._s(t.name))])],1),e("div",{staticClass:"goods-price"},[s._v(s._s(t.price)+"元")]),e("div",{staticClass:"goods-total"},[s._v(s._s(t.price*t.quantity)+"元")])])})],2)])]),e("div",{staticClass:"checkout-count clearfix"},[e("div",{staticClass:"count-box"},[e("ul",[e("li",[e("label",[s._v("商品件数：")]),e("span",[e("span",{staticClass:"total-quantity"},[s._v(s._s(s.proArr.length))]),s._v("件\n                ")])]),e("li",[e("label",[s._v("商品总价：")]),e("span",{staticClass:"total-price"},[e("span",{staticClass:"price"},[s._v(s._s(s.productTotalPrice))]),s._v("元\n                ")])]),s._m(2),s._m(3),s._m(4),e("li",{staticClass:"total-price"},[e("label",[s._v("应付总额：")]),e("span",[e("em",{staticClass:"price"},[s._v(s._s(s.productTotalPrice))]),s._v("元\n                ")])])])])]),e("div",{staticClass:"checkout-bar clearfix"},[e("div",{staticClass:"bar-btn"},[e("a",{attrs:{href:"javascript:;",id:"checkout"},on:{click:s.goToCheckout}},[s._v("去结算")])])])])])]),s.newAddressVisible?e("div",{staticClass:"edit-bg"}):s._e(),s.newAddressVisible?e("div",{staticClass:"edit-address"},[s._m(5),e("div",{staticClass:"edit-body"},[e("form",{staticClass:"body-form clearfix"},[e("input",{attrs:{type:"hidden",name:"address_id"}}),e("div",{staticClass:"form-section form-name"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.newAddress.recipient,expression:"newAddress.recipient"}],staticClass:"input-text name-input",attrs:{type:"text",name:"recipient",placeholder:"收货人姓名"},domProps:{value:s.newAddress.recipient},on:{input:function(t){t.target.composing||s.$set(s.newAddress,"recipient",t.target.value)}}})]),e("div",{staticClass:"form-section form-phone"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.newAddress.phone,expression:"newAddress.phone"}],staticClass:"input-text phone-input",attrs:{type:"text",name:"phone",placeholder:"手机号"},domProps:{value:s.newAddress.phone},on:{input:function(t){t.target.composing||s.$set(s.newAddress,"phone",t.target.value)}}})]),e("div",{staticClass:"form-section form-area"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.newAddress.area,expression:"newAddress.area"}],staticClass:"input-text area-input",attrs:{type:"text",name:"area",placeholder:"选择省 / 市 / 区 / 街道"},domProps:{value:s.newAddress.area},on:{input:function(t){t.target.composing||s.$set(s.newAddress,"area",t.target.value)}}})]),e("div",{staticClass:"form-section form-detail"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:s.newAddress.address,expression:"newAddress.address"}],staticClass:"input-text detail-input",attrs:{type:"textarea",name:"address",placeholder:"详细地址，路名或街道名称，门牌号"},domProps:{value:s.newAddress.address},on:{input:function(t){t.target.composing||s.$set(s.newAddress,"address",t.target.value)}}})])]),s._m(6)]),e("div",{staticClass:"edit-footer"},[e("a",{staticClass:"btn btn-primary confirm",attrs:{href:"javascript:void(0);"},on:{click:s.addNewAddress}},[s._v("保存")]),e("a",{staticClass:"btn btn-gray close",attrs:{href:"javascript:void(0);"},on:{click:s.resetAddressInput}},[s._v("取消")])])]):s._e()])},i=[function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"miniheader-title"},[e("h2",[s._v("确认订单")]),e("p",[s._v("温馨提示：产品是否购买成功，以最终下单为准哦，请尽快结算")])])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("li",{staticClass:"clearfix"},[e("div",{staticClass:"goods-img"}),e("div",{staticClass:"goods-name"},[s._v("商品名称")]),e("div",{staticClass:"goods-price"},[s._v("价格")]),e("div",{staticClass:"goods-total"},[s._v("总价")])])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("li",[e("label",[s._v("活动优惠：")]),e("span",[s._v("-0元")])])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("li",[e("label",[s._v("优惠券抵扣：")]),e("span",[s._v("-0元")])])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("li",[e("label",[s._v("运费：")]),e("span",[s._v("0元")])])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"edit-header"},[e("span",{staticClass:"title"},[s._v("添加收获地址")]),e("a",{staticClass:"close",attrs:{href:"javascript:void(0);"}},[e("i",{staticClass:"iconfont"},[s._v("")])])])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"form-select",staticStyle:{display:"none"}},[e("span",{staticClass:"select-close"},[s._v("x")]),e("div",{staticClass:"select-box clearfix"},[e("div",{staticClass:"select-item",attrs:{"data-init-txt":"选择省份/自治区"}},[s._v("选择省份/自治区")]),e("div",{staticClass:"select-item hidden",attrs:{"data-init-txt":"选择城市/地区"}},[s._v("选择城市/地区")]),e("div",{staticClass:"select-item hidden",attrs:{"data-init-txt":"选择区县"}},[s._v("选择区县")])]),e("div",{staticClass:"option-box"},[e("ul",{staticClass:"option-list clearfix province"},[e("li",{staticClass:"addr-tpl",attrs:{"data-value":"","data-txt":""}})]),e("ul",{staticClass:"option-list clearfix hidden city"}),e("ul",{staticClass:"option-list clearfix hidden district"})])])}],r=(e("20d6"),e("cebc")),n=e("cb30"),d=e("2f62"),c={mounted:function(){var s=this;this.ids=this.$route.params.ids,n["a"].get("/user/cart?ids="+this.ids).then(function(t){console.log(t),s.proArr=t}),n["a"].get("/user/addressList").then(function(t){s.addressList=t})},data:function(){return{proArr:[],addressList:[],newAddressVisible:!1,selectAddress:"",newAddress:{recipient:"",phone:"",area:"",address:"",address_id:""},ids:""}},computed:Object(r["a"])({productTotalPrice:function(){return this.proArr.reduce(function(s,t){return s+t.price*t.quantity},0)}},Object(d["c"])("user",["user"])),methods:Object(r["a"])({},Object(d["b"])("user",["logout"]),{addNewAddress:function(){var s=this;console.log("提交新地址"),n["a"].post("/user/updateAddress",this.newAddress).then(function(t){if(s.newAddress.address_id){var e=s.addressList.findIndex(function(t){return t.address_id==s.newAddress.address_id});s.$set(s.addressList,e,t)}else s.addressList.unshift(t);s.resetAddressInput()})},resetAddressInput:function(){this.newAddress={},this.newAddressVisible=!1},updateAddress:function(s){this.newAddressVisible=!0,this.newAddress={recipient:s.recipient,phone:s.phone,area:s.area,address:s.address,address_id:s.address_id}},goToCheckout:function(){var s=this;this.selectAddress?n["a"].post("/user/checkout",{address_id:this.selectAddress,ids:this.ids}).then(function(t){s.$router.push("/confirm/"+t)}):alert("请选择收货地址")},confirmQuit:function(){var s=this;this.$confirm("确认退出登录？").then(function(t){s.logout(),s.$router.push("/login")}).catch(function(s){})}})},o=c,l=(e("ae85"),e("2877")),u=Object(l["a"])(o,a,i,!1,null,null,null);t["default"]=u.exports},ae85:function(s,t,e){"use strict";var a=e("114b"),i=e.n(a);i.a},cd1c:function(s,t,e){var a=e("e853");s.exports=function(s,t){return new(a(s))(t)}},e853:function(s,t,e){var a=e("d3f4"),i=e("1169"),r=e("2b4c")("species");s.exports=function(s){var t;return i(s)&&(t=s.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),a(t)&&(t=t[r],null===t&&(t=void 0))),void 0===t?Array:t}}}]);
//# sourceMappingURL=chunk-780a5c3a.08228be8.js.map